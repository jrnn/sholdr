{% extends "base.html" %}
{% from "macros.html" import render_field %}

{% block content %}
  <form
    action = "{{ url_for("shareholder.create_or_update") }}"
    method = "POST"
  >
    {{ render_field( form.email ) }}
    {% if form.id.data == "new" %}
      {{ render_field( form.password ) }}
    {% endif %}
    {% if form.type == "natural" %}
      {{ render_field( form.first_name ) }}
      {{ render_field( form.last_name ) }}
      {{ render_field( form.nin ) }}
      {{ render_field( form.nationality ) }}
    {% elif form.type == "juridical" %}
      {{ render_field( form.name ) }}
      {{ render_field( form.business_id ) }}
      {{ render_field( form.contact_person ) }}
    {% endif %}
    {% if form.street.errors %}
      {% set street_class = "form-control is-invalid" %}
    {% else %}
      {% set street_class = "form-control" %}
    {% endif %}
    <div class = "form-group">
      {{ form.street.label }}
      {{ form.street( class = street_class ) }}
    </div>
    <div class = "form-group">
      {{ form.street_ext( class = street_class ) }}
      <div class = "invalid-feedback">
        {% for error in form.street.errors %}
          {{ error }}
        {% endfor %}
      </div>
    </div>
    {{ render_field( form.zip_code ) }}
    {{ render_field( form.city ) }}
    {{ render_field( form.country ) }}
    {{ form.id( hidden = True ) }}
    <input
      hidden
      id = "type"
      name = "type"
      value = "{{ form.type }}"
    />
    <input
      class = "btn btn-secondary form-control"
      id = "submit"
      type = "submit"
      value = "Submit"
    />
  </form>
{% endblock %}
